2025.12.22 03:36:08.275560 [ 1 ] {} <Information> Application: Starting ClickHouse Keeper 25.12.1.649 (revision: 54505, git hash: bf4280aa19d3bade619578a749919e25ce490861, build id: 850543EC7BBD2A9A1CC4C04C027F5A030A3C0566), PID 1
2025.12.22 03:36:08.275590 [ 1 ] {} <Information> Application: starting up
2025.12.22 03:36:08.275598 [ 1 ] {} <Information> Application: OS Name = Linux, OS Version = 6.6.87.2-microsoft-standard-WSL2, OS Architecture = x86_64
2025.12.22 03:36:08.275897 [ 1 ] {} <Information> Application: keeper_server.max_memory_usage_soft_limit is set to 13.92 GiB
2025.12.22 03:36:08.284241 [ 1 ] {} <Information> CgroupsReader: Will create cgroup reader from '/sys/fs/cgroup/' (cgroups version: v2)
2025.12.22 03:36:08.284339 [ 1 ] {} <Information> MemoryWorker: Starting background memory thread with period of 50ms, using Cgroups as source
2025.12.22 03:36:08.285801 [ 1 ] {} <Information> AsynchronousMetrics: Will use cgroup reader from '/sys/fs/cgroup/' (cgroups version: v2)
2025.12.22 03:36:08.286164 [ 1 ] {} <Information> Context: Cannot connect to ZooKeeper (or Keeper) before internal Keeper start, will wait for Keeper synchronously
2025.12.22 03:36:08.286252 [ 1 ] {} <Information> KeeperContext: Keeper feature flag FILTERED_LIST: enabled
2025.12.22 03:36:08.286254 [ 1 ] {} <Information> KeeperContext: Keeper feature flag MULTI_READ: enabled
2025.12.22 03:36:08.286255 [ 1 ] {} <Information> KeeperContext: Keeper feature flag CHECK_NOT_EXISTS: enabled
2025.12.22 03:36:08.286255 [ 1 ] {} <Information> KeeperContext: Keeper feature flag CREATE_IF_NOT_EXISTS: enabled
2025.12.22 03:36:08.286256 [ 1 ] {} <Information> KeeperContext: Keeper feature flag REMOVE_RECURSIVE: enabled
2025.12.22 03:36:08.286257 [ 1 ] {} <Information> KeeperContext: Keeper feature flag MULTI_WATCHES: enabled
2025.12.22 03:36:08.286258 [ 1 ] {} <Information> KeeperContext: Keeper feature flag CHECK_STAT: disabled
2025.12.22 03:36:08.286259 [ 1 ] {} <Information> KeeperContext: Keeper feature flag PERSISTENT_WATCHES: enabled
2025.12.22 03:36:08.286260 [ 1 ] {} <Information> KeeperContext: Keeper feature flag CREATE_WITH_STATS: disabled
2025.12.22 03:36:08.288526 [ 1 ] {} <Warning> KeeperLogStore: No logs exists in /var/lib/clickhouse-keeper/coordination/log. It's Ok if it's the first run of clickhouse-keeper.
2025.12.22 03:36:08.288802 [ 1 ] {} <Information> KeeperLogStore: force_sync enabled
2025.12.22 03:36:08.288826 [ 1 ] {} <Warning> KeeperLogStore: Removing all changelogs
2025.12.22 03:36:08.288875 [ 1 ] {} <Information> KeeperServer: No config in log store and snapshot, probably it's initial run. Will use config from .xml on disk
2025.12.22 03:36:08.291692 [ 44 ] {} <Information> RaftInstance: spawned asio worker thread nuraft_w_0, current threads: 0
2025.12.22 03:36:08.291746 [ 45 ] {} <Information> RaftInstance: spawned asio worker thread nuraft_w_1, current threads: 0
2025.12.22 03:36:08.291897 [ 47 ] {} <Information> RaftInstance: spawned asio worker thread nuraft_w_2, current threads: 2
2025.12.22 03:36:08.291976 [ 49 ] {} <Information> RaftInstance: spawned asio worker thread nuraft_w_3, current threads: 3
2025.12.22 03:36:08.292171 [ 51 ] {} <Information> RaftInstance: spawned asio worker thread nuraft_w_7, current threads: 4
2025.12.22 03:36:08.292188 [ 48 ] {} <Information> RaftInstance: spawned asio worker thread nuraft_w_4, current threads: 4
2025.12.22 03:36:08.292217 [ 46 ] {} <Information> RaftInstance: spawned asio worker thread nuraft_w_6, current threads: 4
2025.12.22 03:36:08.292243 [ 50 ] {} <Information> RaftInstance: spawned asio worker thread nuraft_w_5, current threads: 4
2025.12.22 03:36:08.292264 [ 52 ] {} <Information> RaftInstance: spawned asio worker thread nuraft_w_8, current threads: 7
2025.12.22 03:36:08.292377 [ 53 ] {} <Information> RaftInstance: spawned asio worker thread nuraft_w_9, current threads: 9
2025.12.22 03:36:08.292497 [ 54 ] {} <Information> RaftInstance: spawned asio worker thread nuraft_w_10, current threads: 10
2025.12.22 03:36:08.292633 [ 55 ] {} <Information> RaftInstance: spawned asio worker thread nuraft_w_11, current threads: 11
2025.12.22 03:36:08.292701 [ 57 ] {} <Information> RaftInstance: spawned asio worker thread nuraft_w_13, current threads: 12
2025.12.22 03:36:08.292737 [ 58 ] {} <Information> RaftInstance: spawned asio worker thread nuraft_w_14, current threads: 12
2025.12.22 03:36:08.292745 [ 56 ] {} <Information> RaftInstance: spawned asio worker thread nuraft_w_12, current threads: 11
2025.12.22 03:36:08.292830 [ 60 ] {} <Information> RaftInstance: spawned asio worker thread nuraft_w_15, current threads: 15
2025.12.22 03:36:08.292915 [ 59 ] {} <Information> RaftInstance: spawned asio worker thread nuraft_w_16, current threads: 15
2025.12.22 03:36:08.293036 [ 64 ] {} <Information> RaftInstance: spawned asio worker thread nuraft_w_18, current threads: 17
2025.12.22 03:36:08.293077 [ 61 ] {} <Information> RaftInstance: spawned asio worker thread nuraft_w_17, current threads: 17
2025.12.22 03:36:08.293083 [ 63 ] {} <Information> RaftInstance: spawned asio worker thread nuraft_w_19, current threads: 17
2025.12.22 03:36:08.293297 [ 62 ] {} <Information> RaftInstance: spawned asio worker thread nuraft_w_21, current threads: 20
2025.12.22 03:36:08.293318 [ 65 ] {} <Information> RaftInstance: spawned asio worker thread nuraft_w_20, current threads: 20
2025.12.22 03:36:08.293319 [ 68 ] {} <Information> RaftInstance: spawned asio worker thread nuraft_w_22, current threads: 20
2025.12.22 03:36:08.293330 [ 66 ] {} <Information> RaftInstance: spawned asio worker thread nuraft_w_23, current threads: 20
2025.12.22 03:36:08.293471 [ 69 ] {} <Information> RaftInstance: spawned asio worker thread nuraft_w_25, current threads: 24
2025.12.22 03:36:08.293524 [ 67 ] {} <Information> RaftInstance: spawned asio worker thread nuraft_w_24, current threads: 24
2025.12.22 03:36:08.293555 [ 70 ] {} <Information> RaftInstance: spawned asio worker thread nuraft_w_26, current threads: 25
2025.12.22 03:36:08.293712 [ 74 ] {} <Information> RaftInstance: spawned asio worker thread nuraft_w_28, current threads: 27
2025.12.22 03:36:08.293713 [ 1 ] {} <Information> RaftInstance: Raft ASIO listener initiated on :::9234, unsecured
2025.12.22 03:36:08.293722 [ 71 ] {} <Information> RaftInstance: spawned asio worker thread nuraft_w_27, current threads: 27
2025.12.22 03:36:08.293764 [ 75 ] {} <Information> RaftInstance: spawned asio worker thread nuraft_w_30, current threads: 29
2025.12.22 03:36:08.293764 [ 1 ] {} <Information> RaftInstance: parameters: election timeout range 1000 - 2000, heartbeat 500, leadership expiry 10000, max batch 100, backoff 50, snapshot distance 100000, enable randomized snapshot creation NO, log sync stop gap 99999, use new joiner type NO, reserved logs 100000, client timeout 10000, auto forwarding on, API call type async, custom commit quorum size 0, custom election quorum size 0, snapshot receiver included, leadership transfer wait time 0, grace period of lagging state machine 0, snapshot IO: blocking, parallel log appending: on, streaming mode max log gap 0, max bytes 0
2025.12.22 03:36:08.293767 [ 1 ] {} <Information> RaftInstance: new election timeout range: 1000 - 2000
2025.12.22 03:36:08.293780 [ 1 ] {} <Information> RaftInstance:    === INIT RAFT SERVER ===
commit index 0
term 0
election timer allowed
catching-up no
log store start 1, end 0
config log idx 0, prev log idx 0
 -- ASYNC REPLICATION --
2025.12.22 03:36:08.293818 [ 73 ] {} <Information> RaftInstance: spawned asio worker thread nuraft_w_31, current threads: 29
2025.12.22 03:36:08.293827 [ 72 ] {} <Information> RaftInstance: spawned asio worker thread nuraft_w_29, current threads: 28
2025.12.22 03:36:08.293842 [ 1 ] {} <Information> RaftInstance: peer 1: DC ID 0, clickhouse-keeper-01:9234, voting member, 1
peer 2: DC ID 0, clickhouse-keeper-02:9234, voting member, 1
peer 3: DC ID 0, clickhouse-keeper-03:9234, voting member, 1
my id: 2, voting_member
num peers: 2
2025.12.22 03:36:08.293852 [ 1 ] {} <Information> RaftInstance: global manager does not exist. will use local thread for commit and append
2025.12.22 03:36:08.293990 [ 1 ] {} <Information> RaftInstance: wait for HB, for 50 + [1000, 2000] ms
2025.12.22 03:36:08.294227 [ 77 ] {} <Information> RaftInstance: bg append_entries thread initiated
2025.12.22 03:36:08.335487 [ 31 ] {} <Information> MemoryTracker: Correcting the value of global memory tracker from 8.42 MiB to 47.16 MiB
2025.12.22 03:36:09.768126 [ 44 ] {} <Warning> RaftInstance: Election timeout, initiate leader election
2025.12.22 03:36:09.768155 [ 44 ] {} <Information> RaftInstance: [PRIORITY] decay, target 1 -> 1, mine 1
2025.12.22 03:36:09.768193 [ 44 ] {} <Information> RaftInstance: [ELECTION TIMEOUT] current role: follower, log last term 0, state term 0, target p 1, my p 1, hb dead, pre-vote NOT done
2025.12.22 03:36:09.768200 [ 44 ] {} <Information> RaftInstance: [PRE-VOTE INIT] my id 2, my role candidate, term 0, log idx 0, log term 0, priority (target 1 / mine 1)
2025.12.22 03:36:09.768951 [ 47 ] {} <Information> RaftInstance: 0x7e057b846018 connected to clickhouse-keeper-03:9234 (as a client)
2025.12.22 03:36:09.769158 [ 48 ] {} <Information> RaftInstance: 0x7e057b83bc18 connected to clickhouse-keeper-01:9234 (as a client)
2025.12.22 03:36:09.769254 [ 48 ] {} <Information> RaftInstance: [PRE-VOTE RESP] peer 3 (O), term 0, resp term 0, my role candidate, dead 2, live 0, abandoned 0, num voting members 3, quorum 2
2025.12.22 03:36:09.769255 [ 48 ] {} <Information> RaftInstance: [PRE-VOTE DONE] SUCCESS, term 0
2025.12.22 03:36:09.769256 [ 48 ] {} <Information> RaftInstance: [PRE-VOTE DONE] initiate actual vote
2025.12.22 03:36:09.773560 [ 48 ] {} <Information> RaftInstance: [VOTE INIT] my id 2, my role candidate, term 1, log idx 0, log term 0, priority (target 1 / mine 1)
2025.12.22 03:36:09.773676 [ 55 ] {} <Information> RaftInstance: [PRE-VOTE RESP] peer 1 (O), term 0, resp term 0, my role candidate, dead 3, live 0, abandoned 0, num voting members 3, quorum 2
2025.12.22 03:36:09.773678 [ 55 ] {} <Information> RaftInstance: [PRE-VOTE DONE] SUCCESS, term 0
2025.12.22 03:36:09.773679 [ 55 ] {} <Information> RaftInstance: [PRE-VOTE DONE] actual vote is already initiated, do nothing
2025.12.22 03:36:09.788140 [ 58 ] {} <Information> RaftInstance: [VOTE RESP] peer 3 (O), resp term 1, my role candidate, granted 2, responded 2, num voting members 3, quorum 2
2025.12.22 03:36:09.788142 [ 58 ] {} <Information> RaftInstance: Server is elected as leader for term 1
2025.12.22 03:36:09.788152 [ 58 ] {} <Information> RaftInstance: number of pending commit elements: 0
2025.12.22 03:36:09.788156 [ 58 ] {} <Information> RaftInstance: state machine commit index 0, precommit index 0, last log index 0
2025.12.22 03:36:09.796249 [ 58 ] {} <Information> RaftInstance: [BECOME LEADER] appended new config at 1
2025.12.22 03:36:09.796373 [ 58 ] {} <Information> RaftInstance:   === LEADER (term 1) ===
2025.12.22 03:36:09.796412 [ 61 ] {} <Information> RaftInstance: Election completed, will ignore the voting result from this server
2025.12.22 03:36:09.804902 [ 76 ] {} <Information> RaftInstance: config at index 1 is committed, prev config log idx 0
2025.12.22 03:36:09.804911 [ 76 ] {} <Information> RaftInstance: new config log idx 1, prev log idx 0, cur config log idx 0, prev log idx 0
2025.12.22 03:36:09.804922 [ 76 ] {} <Information> RaftInstance: new configuration: log idx 1, prev log idx 0
peer 1, DC ID 0, clickhouse-keeper-01:9234, voting member, regular member, 1
peer 2, DC ID 0, clickhouse-keeper-02:9234, voting member, regular member, 1
peer 3, DC ID 0, clickhouse-keeper-03:9234, voting member, regular member, 1
my id: 2, leader: 2, term: 1
2025.12.22 03:36:09.805238 [ 1 ] {} <Information> Application: Listening for Keeper (tcp): 0.0.0.0:9181
2025.12.22 03:36:09.835889 [ 1 ] {} <Information> Application: keeper_server.max_memory_usage_soft_limit is set to 13.92 GiB
2025.12.22 03:36:09.836555 [ 1 ] {} <Information> CertificateReloader: One of paths is empty. Cannot apply new configuration for certificates. Fill all paths and try again.
2025.12.22 03:36:09.836560 [ 1 ] {} <Information> CertificateReloader: One of paths is empty. Cannot apply new configuration for certificates. Fill all paths and try again.
2025.12.22 03:36:09.837124 [ 1 ] {} <Information> CgroupsMemoryUsageObserver: Started cgroup current memory usage observer thread
2025.12.22 03:36:09.837126 [ 1 ] {} <Information> Application: Ready for connections.
2025.12.22 03:36:09.837319 [ 84 ] {} <Information> CgroupsMemoryUsageObserver: Memory amount initially available to the process is 15.47 GiB
2025.12.22 03:38:15.036575 [ 30 ] {} <Information> Application: Received termination signal (Terminated)
2025.12.22 03:38:15.036699 [ 1 ] {} <Information> CgroupsMemoryUsageObserver: Stopped cgroup current memory usage observer thread
2025.12.22 03:38:15.036712 [ 1 ] {} <Information> Application: Shutting down.
2025.12.22 03:38:15.037042 [ 1 ] {} <Information> Application: Closed all listening sockets.
2025.12.22 03:38:15.037045 [ 1 ] {} <Information> Application: Closed connections to Keeper.
2025.12.22 03:38:15.323367 [ 1 ] {} <Information> RaftInstance: shutting down raft core
2025.12.22 03:38:15.323389 [ 1 ] {} <Information> RaftInstance: sent stop signal to the commit thread.
2025.12.22 03:38:15.323561 [ 1 ] {} <Information> RaftInstance: cancelled all schedulers.
2025.12.22 03:38:15.323563 [ 1 ] {} <Information> RaftInstance: commit thread stopped.
2025.12.22 03:38:15.323564 [ 1 ] {} <Information> RaftInstance: all pending commit elements dropped.
2025.12.22 03:38:15.323565 [ 1 ] {} <Information> RaftInstance: reset all pointers.
2025.12.22 03:38:15.323566 [ 1 ] {} <Information> RaftInstance: joined terminated commit thread.
2025.12.22 03:38:15.323828 [ 1 ] {} <Information> RaftInstance: sent stop signal to background append thread.
2025.12.22 03:38:15.323861 [ 77 ] {} <Information> RaftInstance: bg append_entries thread terminated
2025.12.22 03:38:15.323953 [ 1 ] {} <Information> RaftInstance: clean up auto-forwarding queue: 0 elems
2025.12.22 03:38:15.323955 [ 1 ] {} <Information> RaftInstance: clean up auto-forwarding clients
2025.12.22 03:38:15.323956 [ 1 ] {} <Information> RaftInstance: raft_server shutdown completed.
2025.12.22 03:38:15.323957 [ 1 ] {} <Information> RaftInstance: manually create a snapshot on 1
2025.12.22 03:38:15.323977 [ 1 ] {} <Information> RaftInstance: creating a snapshot for index 1
2025.12.22 03:38:15.323979 [ 1 ] {} <Information> RaftInstance: create snapshot idx 1 log_term 1
2025.12.22 03:38:15.324032 [ 1 ] {} <Information> KeeperStateMachine: Creating a snapshot during shutdown because 'create_snapshot_on_exit' is enabled.
2025.12.22 03:38:15.330218 [ 1 ] {} <Information> RaftInstance: snapshot idx 1 log_term 1 created, compact the log store if needed
2025.12.22 03:38:15.330222 [ 1 ] {} <Information> RaftInstance: create snapshot idx 1 log_term 1 done: 6242 us elapsed
2025.12.22 03:38:15.330250 [ 68 ] {} <Error> RaftInstance: failed to accept a rpc connection due to error 125, Operation canceled
2025.12.22 03:38:15.330658 [ 64 ] {} <Information> RaftInstance: end of asio worker thread nuraft_w_18, remaining threads: 31
2025.12.22 03:38:15.330678 [ 45 ] {} <Information> RaftInstance: end of asio worker thread nuraft_w_1, remaining threads: 30
2025.12.22 03:38:15.330719 [ 68 ] {} <Information> RaftInstance: end of asio worker thread nuraft_w_22, remaining threads: 27
2025.12.22 03:38:15.330733 [ 49 ] {} <Information> RaftInstance: end of asio worker thread nuraft_w_3, remaining threads: 29
2025.12.22 03:38:15.330742 [ 50 ] {} <Information> RaftInstance: end of asio worker thread nuraft_w_5, remaining threads: 25
2025.12.22 03:38:15.330744 [ 53 ] {} <Information> RaftInstance: end of asio worker thread nuraft_w_9, remaining threads: 28
2025.12.22 03:38:15.330762 [ 44 ] {} <Information> RaftInstance: end of asio worker thread nuraft_w_0, remaining threads: 24
2025.12.22 03:38:15.330796 [ 71 ] {} <Information> RaftInstance: end of asio worker thread nuraft_w_27, remaining threads: 21
2025.12.22 03:38:15.330798 [ 73 ] {} <Information> RaftInstance: end of asio worker thread nuraft_w_31, remaining threads: 22
2025.12.22 03:38:15.330815 [ 58 ] {} <Information> RaftInstance: end of asio worker thread nuraft_w_14, remaining threads: 20
2025.12.22 03:38:15.330778 [ 51 ] {} <Information> RaftInstance: end of asio worker thread nuraft_w_7, remaining threads: 26
2025.12.22 03:38:15.330829 [ 70 ] {} <Information> RaftInstance: end of asio worker thread nuraft_w_26, remaining threads: 23
2025.12.22 03:38:15.330884 [ 63 ] {} <Information> RaftInstance: end of asio worker thread nuraft_w_19, remaining threads: 18
2025.12.22 03:38:15.330916 [ 59 ] {} <Information> RaftInstance: end of asio worker thread nuraft_w_16, remaining threads: 16
2025.12.22 03:38:15.330940 [ 54 ] {} <Information> RaftInstance: end of asio worker thread nuraft_w_10, remaining threads: 14
2025.12.22 03:38:15.330956 [ 57 ] {} <Information> RaftInstance: end of asio worker thread nuraft_w_13, remaining threads: 17
2025.12.22 03:38:15.330968 [ 66 ] {} <Information> RaftInstance: end of asio worker thread nuraft_w_23, remaining threads: 19
2025.12.22 03:38:15.330974 [ 75 ] {} <Information> RaftInstance: end of asio worker thread nuraft_w_30, remaining threads: 12
2025.12.22 03:38:15.330964 [ 67 ] {} <Information> RaftInstance: end of asio worker thread nuraft_w_24, remaining threads: 15
2025.12.22 03:38:15.330986 [ 61 ] {} <Information> RaftInstance: end of asio worker thread nuraft_w_17, remaining threads: 13
2025.12.22 03:38:15.331000 [ 60 ] {} <Information> RaftInstance: end of asio worker thread nuraft_w_15, remaining threads: 10
2025.12.22 03:38:15.331011 [ 69 ] {} <Information> RaftInstance: end of asio worker thread nuraft_w_25, remaining threads: 7
2025.12.22 03:38:15.330999 [ 46 ] {} <Information> RaftInstance: end of asio worker thread nuraft_w_6, remaining threads: 8
2025.12.22 03:38:15.331028 [ 55 ] {} <Information> RaftInstance: end of asio worker thread nuraft_w_11, remaining threads: 6
2025.12.22 03:38:15.331035 [ 72 ] {} <Information> RaftInstance: end of asio worker thread nuraft_w_29, remaining threads: 5
2025.12.22 03:38:15.331035 [ 74 ] {} <Information> RaftInstance: end of asio worker thread nuraft_w_28, remaining threads: 9
2025.12.22 03:38:15.331046 [ 65 ] {} <Information> RaftInstance: end of asio worker thread nuraft_w_20, remaining threads: 4
2025.12.22 03:38:15.331050 [ 62 ] {} <Information> RaftInstance: end of asio worker thread nuraft_w_21, remaining threads: 2
2025.12.22 03:38:15.331055 [ 56 ] {} <Information> RaftInstance: end of asio worker thread nuraft_w_12, remaining threads: 1
2025.12.22 03:38:15.331072 [ 47 ] {} <Information> RaftInstance: end of asio worker thread nuraft_w_2, remaining threads: 0
2025.12.22 03:38:15.331077 [ 52 ] {} <Information> RaftInstance: end of asio worker thread nuraft_w_8, remaining threads: 3
2025.12.22 03:38:15.331053 [ 48 ] {} <Information> RaftInstance: end of asio worker thread nuraft_w_4, remaining threads: 11
2025.12.22 03:38:15.334622 [ 42 ] {} <Information> KeeperLogStore: Raft server is not set in LogStore.
2025.12.22 03:38:15.338877 [ 1 ] {} <Information> KeeperSnapshotManagerS3: KeeperSnapshotManagerS3 shut down
2025.12.22 03:38:15.339233 [ 1 ] {} <Information> KeeperLogStore: Changelog is shut down
2025.12.22 03:38:15.339676 [ 1 ] {} <Information> Application: Waiting for background threads
2025.12.22 03:38:15.340426 [ 1 ] {} <Information> Application: Background threads finished in 0 ms
2025.12.22 03:38:15.340429 [ 1 ] {} <Information> Application: shutting down
2025.12.22 03:38:15.340462 [ 30 ] {} <Information> BaseDaemon: Stop SignalListener thread
