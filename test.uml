@startuml
title Quy trình cấp dữ liệu từ DMP Chiến Lược xuống DMP Chiến Dịch (Sequence Diagram)

actor UserCDC as "User Admin\nCấp Chiến Dịch"
participant DMP_CDC as "DMP Cấp Chiến Dịch"
actor UserCSL as "User Admin\nCấp Chiến Lược"
actor SuperAdmin
participant DMP_CSL as "DMP Cấp Chiến Lược"
participant TempStore as "Bộ Nhớ Tạm\n(Cấp Chiến Lược)"

UserCDC -> DMP_CDC: Đăng nhập DMP cấp chiến dịch
UserCDC -> DMP_CDC: Truy cập Storage\n(Xem dữ liệu A)

alt Dữ liệu A có sẵn
    DMP_CDC --> UserCDC: Trả về dữ liệu A
    return
else Không có dữ liệu
    DMP_CDC --> UserCDC: Báo thiếu dữ liệu\nYêu cầu đăng nhập chiến lược
end

UserCDC -> UserCSL: Chuyển sang đăng nhập tài khoản cấp chiến lược
UserCSL -> DMP_CSL: Đăng nhập vào DMP cấp chiến lược
UserCSL -> SuperAdmin: Gửi yêu cầu cấp phát dữ liệu A

alt SuperAdmin duyệt
    SuperAdmin --> UserCSL: Phê duyệt
else SuperAdmin từ chối
    SuperAdmin --> UserCSL: Từ chối yêu cầu
    return
end

SuperAdmin -> DMP_CSL: Kích hoạt cấp quyền + chuẩn bị dữ liệu

DMP_CSL -> TempStore: Copy dữ liệu A xuống bộ nhớ tạm
TempStore --> DMP_CSL: Xác nhận đã lưu tạm

DMP_CSL -> DMP_CDC: Đồng bộ dữ liệu A xuống cấp chiến dịch
DMP_CDC --> UserCDC: Gửi dữ liệu A hoàn chỉnh

@enduml
